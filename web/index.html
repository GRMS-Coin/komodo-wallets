<!doctype html>
<html lang="en">

<head>
    <base href="/">
    <meta charset="UTF-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description"
        content="Start using Komodo Wallet directly from your web browser. Buy crypto with fiat, and store, send, and/or receive crypto and NFTs across multiple blockchains.">
    <title>Komodo Wallet | Secure Multi-Chain Crypto Wallet</title><!-- Open Graph Protocol -->
    <meta property="og:site_name" content="Komodo Wallet" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Komodo Wallet | Secure Multi-Chain Crypto Wallet" />
    <meta property="og:description"
        content="Start using Komodo Wallet directly from your web browser. Buy crypto with fiat, and store, send, and/or receive crypto and NFTs across multiple blockchains." />
    <meta property="og:image" content="https://app.komodoplatform.com/thumbnail.jpg" /><!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Komodo Wallet | Secure Multi-Chain Crypto Wallet" />
    <meta name="twitter:description"
        content="Start using Komodo Wallet directly from your web browser. Buy crypto with fiat, and store, send, and/or receive crypto and NFTs across multiple blockchains." />
    <meta name="twitter:site" content="@komodoplatform" />
    <meta name="twitter:image" content="https://app.komodoplatform.com/thumbnail.jpg" /><!-- iOS meta tags & icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Komodo Wallet">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="manifest.json">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="#0175c2">
    <meta name="msapplication-config" content="/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <!-- Preload coin configs. This will no longer be needed in the near future when build-time coins are removed -->
    <link rel="preload" as="fetch" href="assets/packages/komodo_defi_framework/assets/config/coins.json" crossorigin>
    <link rel="preload" as="fetch" href="assets/packages/komodo_defi_framework/assets/config/coins_config.json"
        crossorigin>
    <script src="/assets/packages/flutter_inappwebview_web/assets/web/web_support.js" defer="defer"></script>
    <script src="/services/theme_checker/theme_checker.js"></script>
    <link rel="prefetch" href="/icons/logo_icon.png" as="image"><!-- Preconnects -->
    <link rel="preconnect" href="https://www.gstatic.com" />
    <link rel="preconnect" href="https://www.googletagmanager.com" />
    <link rel="preconnect" href="https://worldtimeapi.org" /><!-- Preload resources -->
    <link rel="preload" as="fetch"
        href="https://cache.defi-stats.komodo.earth/api/v3/prices/tickers_v2.json?expire_at=600" crossorigin>
    <script type="application/ld+json">{
            "@context": "https://schema.org",
            "@type": "WebApplication",
            "name": "Komodo Wallet",
            "url": "https://app.komodoplatform.com",
            "description": "Start using Komodo Wallet directly from your web browser. Buy crypto with fiat, and store, send, and/or receive crypto and NFTs across multiple blockchains.",
            "applicationCategory": "FinanceApplication",
            "operatingSystem": "All",
            maintainer: {
                "@type": "Organization",
                "name": "Komodo Platform",
                "url": "https://komodoplatform.com",
                "email": "info@komodoplatform.com",
                "logo": "https://komodoplatform.com/assets/img/logo-dark.png",
                "sameAs": [
                    "https://twitter.com/komodoplatform",
                    "https://www.linkedin.com/company/komodoplatform",
                    "https://www.reddit.com/r/komodoplatform",
                    "https://www.youtube.com/channel/UCtp7YrrEnZbW97sgPldyvKg",
                    "https://www.github.com/KomodoPlatform"
                    ],
                "description": "Komodo is an open, composable blockchain platform. With a unique multi-chain design, Komodo is focused on providing fully composable blockchain solutions for independent developers, startups, and enterprise businesses alike.",
              }
        }</script>
</head>

<body>
    <script src="flutter_bootstrap.js" async></script><!-- Background -->
    <script>
        document.getElementById("swUpdateModal").style.display = "none";
        document.getElementById("swRefresh").addEventListener("click", function () {
            window.location.reload();
        }); 
        if ("serviceWorker" in navigator) {
  let newWorker;
  window.addEventListener("load", () => {
    // Register the service worker
    navigator.serviceWorker.register("flutter_service_worker.js").then((reg) => {
      reg.addEventListener("updatefound", () => {
        newWorker = reg.installing;
        newWorker.addEventListener("statechange", () => {
          switch (newWorker.state) {
            case "installed":
              if (navigator.serviceWorker.controller) {
                document
                  .getElementById("swUpdateModal").style.display = "block";
              }
              newWorker.postMessage({ type: "SKIP_WAITING" });
              break;
          }
        });
      });
      let swWaiting = reg.waiting;
      if (swWaiting) {
        document
        .getElementById("swUpdateModal").style.display = "block";
      }
      swWaiting.postMessage({ type: "SKIP_WAITING" });
    });

    async function handleSwUpdate() {
      let refreshing;
      const oldSw = await navigator.serviceWorker.getRegistration();
      const oldSwState = oldSw && oldSw.active ? oldSw.active.state : null;
      // The event listener that is fired when the service worker updates
      // Here we reload the page
      navigator.serviceWorker.addEventListener(
        "controllerchange",
        async function () {
          if (refreshing) return;
          const newSw = await navigator.serviceWorker.getRegistration();
          const newSwState = newSw && newSw.active ? newSw.active.state : null;
          if (oldSwState === "activated" && newSwState === "activating") {
            refreshing = true;
            window.location.reload();
          }
        }
      );
    }
    handleSwUpdate();
  });
}
    </script>
    <style>
        body.light {
            background-color: #e6ebeb
        }

        body.dark {
            background-color: #121420
        }
    </style>
    <script>var queryParams = new URLSearchParams(window.location.search), theme = queryParams.get("brightness"); theme ||= window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light", document.body.classList.add(theme)</script>
    <!-- Loading indicator -->
    <div id="loading">
        <style>
            body {
                inset: 0;
                overflow: hidden;
                margin: 0;
                padding: 0;
                position: fixed
            }

            #loading {
                align-items: center;
                display: flex;
                height: 100%;
                justify-content: center;
                width: 100%
            }

            #loading img {
                animation: 1s ease-in-out 0s infinite alternate breathe;
                opacity: .9;
                transition: opacity .4s
            }

            #loading.main_done img {
                opacity: 1
            }

            #loading.init_done img {
                animation: .33s ease-in-out 0s 1 forwards zooooom;
                opacity: .05
            }

            @keyframes breathe {
                from {
                    transform: scale(1)
                }

                to {
                    transform: scale(.95)
                }
            }

            @keyframes zooooom {
                from {
                    transform: scale(1)
                }

                to {
                    transform: scale(.01)
                }
            }
        </style><img src="/icons/logo_icon.png" width="192" height="192"
            alt="Komodo Wallet is starting... Please wait." />
    </div>
    <script
        async="false">window.addEventListener("DOMContentLoaded", (d => { console.log("DOM fully loaded and parsed"), window.init_wasm && !0 !== window.is_mm2_preload_busy && (window.is_mm2_preload_busy = !0, window.init_wasm().then((() => { window.is_mm2_preloaded = !0 })).finally((() => { window.is_mm2_preload_busy = !1 }))) }))</script>
    <!-- App -->
    <div id="main-content" style="position:absolute;width:100%;height:100%;display:none">
        <!-- Flutter app will be injected here -->
    </div>
    <div id="swUpdateModal" style="display:none;position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);z-index:1000;">
        <div style="background-color:white;padding:20px;border-radius:10px;width:300px;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);">
            <h1>Update available to {{flutter_service_worker_version}}</h1>
            <p>A new version of the app is available. Please click the button below to update.</p>
            <button id="swRefresh" style="background-color:blue;color:white;padding:10px;border-radius:5px;cursor:pointer;">Refresh</button>
        </div>
    </div>
</body>

</html>
